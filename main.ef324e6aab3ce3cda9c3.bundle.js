(self.webpackChunkreact_lt=self.webpackChunkreact_lt||[]).push([[179],{2953:(e,n,t)=>{"use strict";t.r(n),t.d(n,{slides:()=>u,backgrounds:()=>p,fragmentSteps:()=>s,fusumaProps:()=>o,default:()=>i});var l=t(7401),r=t(9332);t(108),t(4819),t(6066),t(1687),t(230),t(8366),t(6757);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}const u=[e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h1",null,"React ã® Ref ã¨ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã«ãŠã‘ã‚‹ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹"),(0,r.kt)("p",null,"æ ªå¼ä¼šç¤¾ kikitori CTO"),(0,r.kt)("p",null,"æ°¸è°· é¾å½¦"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/chelproc/20210715-coral-react-lt"},"ãƒªãƒã‚¸ãƒˆãƒª")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"samples"},"ã‚µãƒ³ãƒ—ãƒ«"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"è‡ªå·±ç´¹ä»‹"),(0,r.kt)("div",{className:"grid"},(0,r.kt)("div",{className:"column"},(0,r.kt)("p",null,(0,r.kt)("img",{src:t(9502),alt:"è‡ªå·±ç´¹ä»‹"}))),(0,r.kt)("div",{className:"column"},(0,r.kt)("p",null,"æ±äº¬å¤§å­¦å·¥å­¦éƒ¨ã‚·ã‚¹ãƒ†ãƒ å‰µç”Ÿå­¦ç§‘ç’°å¢ƒãƒ»ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚·ã‚¹ãƒ†ãƒ å°‚æ”»ã€‚"),(0,r.kt)("p",null,"10 æ­³ã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã€‚14 æ­³ã§å­¦å†…å‘ã‘å­¦ç¿’ Q&A ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ç™ºã€‚2018 å¹´ã‚ˆã‚Šãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã¨ã—ã¦æ´»å‹•ã‚’é–‹å§‹ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‹ã‚‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¾ã§å¤šæ§˜ãªè¨€èªã‚’æ‰±ã†ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚"),(0,r.kt)("p",null,"2019 å¹´ã«æ ªå¼ä¼šç¤¾ kikitori ã«å‚ç”»ã€‚")))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Ref ã¨ã¯"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Ref ã¯ render ãƒ¡ã‚½ãƒƒãƒ‰ã§ä½œæˆã•ã‚ŒãŸ DOM ãƒãƒ¼ãƒ‰ã‚‚ã—ãã¯ React ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚"),(0,r.kt)("p",{parentName:"blockquote"},"-- ",(0,r.kt)("a",{parentName:"p",href:"https://ja.reactjs.org/docs/refs-and-the-dom.html"},"https://ja.reactjs.org/docs/refs-and-the-dom.html")))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"åŸºæœ¬çš„ãªä½¿ã„æ–¹"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useRef")," ã®æˆ»ã‚Šå€¤ã‚’ ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," å±æ€§ã«æ¸¡ã™ã¨ ",(0,r.kt)("inlineCode",{parentName:"p"},"current")," ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã« DOM ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå…¥ã‚‹ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample01"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function Sample1() {\n  const ref = useRef<HTMLInputElement>(null);\n\n  return (\n    <>\n      <input ref={ref} />\n      <button\n        onClick={() => {\n          ref.current?.focus();\n        }}\n      >\n        focus\n      </button>\n    </>\n  );\n}\n"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Ref ã®æ­´å²"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("del",{parentName:"li"},"String Refs")," (ãŸã¶ã‚“åˆæœŸã‹ã‚‰ã‚ã‚‹)"),(0,r.kt)("li",{parentName:"ul"},"Callback Ref (v0.13.0 / 2015 å¹´)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"String Refs ã‚ˆã‚ŠæŸ”è»Ÿã« Ref ãŒæ‰±ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚"))),(0,r.kt)("li",{parentName:"ul"},"Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (v16.3.0 / 2018 å¹´)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Callback Ref ã‚ˆã‚Šã‚‚é–‹ç™ºè€…ã«ã¨ã£ã¦ä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç›®æŒ‡ã—ã¦é–‹ç™ºã•ã‚ŒãŸã€‚"))))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Class Component æ™‚ä»£ã® Ref (1)"),(0,r.kt)("p",null,"Class Component æ™‚ä»£ã® Ref: ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample02"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"class Child extends Component {\n  render() {\n    return <div>Hello World</div>;\n  }\n}\n\nexport default class Sample02 extends Component {\n  divRef = createRef<HTMLDivElement>();\n  divElement: HTMLDivElement | null = null;\n  childRef = createRef<Child>();\n\n  render() {\n    return (\n      <>\n        {/* Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã†å ´åˆ */}\n        <div ref={this.divRef} />\n        {/* Callback Ref ã‚’ä½¿ã†å ´åˆ */}\n        <div\n          ref={(element) => {\n            this.divElement = element;\n          }}\n        />\n        <Child ref={this.childRef} />\n      </>\n    );\n  }\n}\n")),(0,r.kt)("p",null,"å¯¾è±¡ãŒ DOM è¦ç´ ã§ã‚ã‚Œã° DOM ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã€ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚Œã°ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå–å¾—ã§ãã‚‹")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Class Component æ™‚ä»£ã® Ref (2)"),(0,r.kt)("p",null,"å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã›ãŸã‚Šã™ã‚‹ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample03"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"class Child extends Component<{}, { count: number }> {\n  state = { count: 1 };\n\n  increment() {\n    this.setState((state) => ({ count: state.count + 1 }));\n  }\n\n  render() {\n    return <div>{this.state.count}</div>;\n  }\n}\n\nexport default class Sample03 extends Component {\n  ref = createRef<Child>();\n\n  render() {\n    return (\n      <>\n        <Child ref={this.ref} />\n        <button\n          onClick={() => {\n            this.ref.current?.increment();\n          }}\n        >\n          increment\n        </button>\n      </>\n    );\n  }\n}\n"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Hooks ä»¥é™ã® Ref (1)"),(0,r.kt)("p",null,"ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€Ref ã‚’å–å¾—ã§ããªã„ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample04"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function Child() {\n  return <div>Child</div>;\n}\n\nexport default function Sample04() {\n  const ref = useRef<any>(null);\n\n  // @ts-expect-error Property 'ref' does not exist on type 'IntrinsicAttributes'.\n  return <Child ref={ref} />;\n}\n"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Hooks ä»¥é™ã® Ref (2)"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef")," ã‚’ä½¿ã†ã¨ function component ã§ã‚‚ ref ã‚’å…¬é–‹ã§ãã‚‹ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample05"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const Child = forwardRef<HTMLInputElement>(function Child(_, ref) {\n  return <input ref={ref} />;\n});\n\nexport default function Sample05() {\n  const ref = useRef<HTMLInputElement>(null);\n\n  return (\n    <>\n      <Child ref={ref} />\n      <button\n        onClick={() => {\n          ref.current?.focus();\n        }}\n      >\n        focus\n      </button>\n    </>\n  );\n}\n"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Hooks ä»¥é™ã® Ref (3)"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ref")," ã¨ã„ã†å±æ€§åã«ã“ã ã‚ã‚‰ãªã‘ã‚Œã°åˆ¥ã« ",(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef")," ã‚’ä½¿ã†å¿…è¦ã¯ãªã„ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample06"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function Child(props: { innerRef: Ref<HTMLInputElement> }) {\n  return <input ref={props.innerRef} />;\n}\n\nexport default function Sample06() {\n  const ref = useRef<HTMLInputElement>(null);\n\n  return (\n    <>\n      <Child innerRef={ref} />\n      <button\n        onClick={() => {\n          ref.current?.click();\n        }}\n      />\n    </>\n  );\n}\n")),(0,r.kt)("p",null,"HoC ã‚’ä½œã‚‹æ™‚ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½œæˆè€…ãŒ Class Component â†’ Functional Component ã«ç§»è¡Œã™ã‚‹éš›ã«ä¾¿åˆ©ã€‚")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Hooks ä»¥é™ã® Ref (4)"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle"),"ã‚’ç”¨ã„ã‚‹ã“ã¨ã§è‡ªç”±ãªå€¤ã‚’ ref ã«è¨­å®šã§ãã‚‹ã€‚ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€å˜ç´”ãªé–¢æ•°ã‚’ Ref ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample07"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"type ChildRef = () => void;\n\nconst Child = forwardRef<ChildRef>(function Child(_, ref) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useImperativeHandle(ref, () => () => {\n    inputRef.current?.focus();\n  });\n\n  return <input ref={inputRef} />;\n});\n\nexport default function Sample07() {\n  const ref = useRef<ChildRef>(null);\n\n  return (\n    <>\n      <Child ref={ref} />\n      <button\n        onClick={() => {\n          ref.current?.();\n        }}\n      >\n        focus\n      </button>\n    </>\n  );\n}\n"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"useEffect ã‚’ç”¨ã„ãŸ useImperativeHandle ã®å†å®Ÿè£…"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"samples/sample08"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'useEffect(() => {\n  const refValue = () => {\n    inputRef.current?.focus();\n  };\n\n  // Callback Refã®å ´åˆ\n  if (typeof ref === "function") {\n    ref(refValue);\n    return () => {\n      ref(null);\n    };\n  }\n\n  // Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ\n  if (ref) {\n    ref.current = refValue;\n    return () => {\n      ref.current = null;\n    };\n  }\n});\n')),(0,r.kt)("p",null,"ï¼ˆå°‘ãªãã¨ã‚‚ï¼‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒã‚¦ãƒ³ãƒˆæ™‚ã¨ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«è¦ªã‹ã‚‰æ¸¡ã•ã‚ŒãŸ Ref ã®å€¤ã‚’è¨­å®šã™ã‚Œã°ã‚ˆã„ã€‚"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle"),"ã‚’ä½¿ã†ã“ã¨ã§ã€Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ Callback Ref ã®å·®ç•°ã‚’å¸åã§ãã‚‹ã€‚")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Hooks å¾Œã® Ref ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"DOM ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ â† ä»Šã¾ã§æ‰±ã£ã¦ããŸ"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Class Component ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã®ä»£ã‚ã‚Š"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«"),(0,r.kt)("li",{parentName:"ul"},"å¤‰æ›´ã—ã¦ã‚‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œãªã„"))))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Ref ã® DOM ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (1)"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/streamich/react-use"},"react-use"),"ã®",(0,r.kt)("a",{parentName:"p",href:"https://github.com/streamich/react-use/blob/master/src/useMountedState.ts"},"useMountedState")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function useMountedState(): () => boolean {\n  const mountedRef = useRef<boolean>(false);\n  const get = useCallback(() => mountedRef.current, []);\n\n  useEffect(() => {\n    mountedRef.current = true;\n\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  return get;\n}\n")),(0,r.kt)("p",null,"ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç ´æ£„ã•ã‚ŒãŸå¾Œã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã«ãƒã‚¦ãƒ³ãƒˆçŠ¶æ…‹ã‚’æ ¼ç´ã—ã¦ã„ã‚‹")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"Ref ã® DOM ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (2)"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/react-redux"},"react-redux"),"ã®",(0,r.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/react-redux/blob/master/src/hooks/useSelector.js"},"useSelector")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function useSelectorWithStoreAndSubscription(selector, equalityFn, store) {\n  const latestSelector = useRef();\n  const latestStoreState = useRef();\n  const latestSelectedState = useRef();\n\n  let selectedState;\n  if (\n    selector !== latestSelector.current ||\n    storeState !== latestStoreState.current\n  ) {\n    const newSelectedState = selector(storeState);\n    if (!equalityFn(newSelectedState, latestSelectedState.current))\n      selectedState = newSelectedState;\n    else selectedState = latestSelectedState.current;\n  } else {\n    selectedState = latestSelectedState.current;\n  }\n  return selectedState;\n}\n")),(0,r.kt)("p",null,"ç„¡ç”¨ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ç™ºç”Ÿã•ã›ãªã„ã‚ˆã†ã«ã€",(0,r.kt)("inlineCode",{parentName:"p"},"selector")," ã®çµæœã‚’ Ref ã«ä¿å­˜ã—ã¦ãŠãã€‚")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"çªç„¶ã§ã™ãŒå¼Šç¤¾ã®ç´¹ä»‹ã§ã™"),(0,r.kt)("div",{className:"grid"},(0,r.kt)("div",{className:"column"},(0,r.kt)("p",null,(0,r.kt)("img",{src:t(5927),alt:"nimaru"})),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(3710),alt:"kikitori"}))),(0,r.kt)("div",{className:"column"},(0,r.kt)("p",null,"å¼Šç¤¾ ",(0,r.kt)("a",{parentName:"p",href:"https://kikitori.jp/"},"kikitori")," ã¯ã€è¾²ç”£ç‰©ã®æµé€šç¾å ´å‘ã‘ SaaSã€Œ",(0,r.kt)("a",{parentName:"p",href:"https://nimaru.jp/"},"nimaru"),"ã€ã‚’é€šã—ã¦ã€è¾²æ¥­æµé€šå…¨ä½“ã® DX ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚"),(0,r.kt)("p",null,"å…¨å›½ã®å¸å£²å¸‚å ´ã‚„ JA ã«ã¦ã”åˆ©ç”¨ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚")))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã«ã¦"),(0,r.kt)("p",null,"å¼Šç¤¾ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã® 1 ã¤ã§ã‚ã‚‹ nimaru JA ã¯æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ çš„ãªå´é¢ãŒå¼·ã„"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(5622),alt:"nimaru JAã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ"})),(0,r.kt)("p",null,"ã€ŒEnter ã‚­ãƒ¼ã§ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã—ãŸã„ã€ã¨ã„ã†è¦æœ›ãŒæ¥ãŸã‚‰ï¼Ÿï¼Ÿ")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"èª²é¡Œ"),(0,r.kt)("p",null,"Ref ã§è¤‡æ•°ã® DOM ã‚’ã©ã†æ‰±ã†ã‹ ğŸ¤”")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("p",null,"ãªã‚“ã‹ Ref ã‚’ã‚´ãƒ‹ãƒ§ã‚´ãƒ‹ãƒ§ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã£ãŸã‚ˆã†ãª"),(0,r.kt)("p",null,(0,r.kt)("img",{src:"https://raw.githubusercontent.com/react-hook-form/react-hook-form/master/docs/logo.png",alt:"React Hook Form"}))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"React Hook Form"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"register")," ã®æˆ»ã‚Šå€¤ã«ã¯ ",(0,r.kt)("inlineCode",{parentName:"p"},"Ref")," ãŒå«ã¾ã‚Œã‚‹ã€‚"),(0,r.kt)("p",null,"æ•¢ãˆã¦ ",(0,r.kt)("inlineCode",{parentName:"p"},"value")," å±æ€§ã‚’ä½¿ã‚ãš ",(0,r.kt)("inlineCode",{parentName:"p"},"input")," ã‚’éåˆ¶å¾¡ã®ã¾ã¾ã«ã—ã¦ãŠãã“ã¨ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ”¹å–„ã—ãŸã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample09"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'type FormValue = {\n  name: string;\n};\n\nexport default function Sample09() {\n  const { register, handleSubmit } = useForm<FormValue>();\n\n  return (\n    <form\n      onSubmit={handleSubmit((e) => {\n        alert(e.name);\n      })}\n    >\n      <input {...register("name")} />\n      <input type="submit" />\n    </form>\n  );\n}\n')),(0,r.kt)("p",null,"ã¡ãªã¿ã« v6 ã§ã¯ ",(0,r.kt)("inlineCode",{parentName:"p"},"ref={register()}")," ã¨ã‚„ã£ã¦ã„ãŸã®ã§ v7 ã® API ã§ã¯èƒŒå¾³æ„ŸãŒè–„ããªã£ãŸï¼ˆï¼Ÿï¼‰")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"React Hook Form ã®å‹•ä½œåŸç†"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"register")," ã¯ ",(0,r.kt)("inlineCode",{parentName:"li"},"{ onChange(), ref }")," ã®å½¢ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ä½¿ã†å´ã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§å±•é–‹ã™ã‚‹ã ã‘ã§ä½¿ãˆã‚‹"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ref")," ã¯ Callback Ref"),(0,r.kt)("li",{parentName:"ul"},"Callback Ref å†…ã§",(0,r.kt)("strong",{parentName:"li"},"é€£æƒ³é…åˆ—"),"ã® Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã« ref ã‚’ä¿å­˜ã™ã‚‹")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function useForm() {\n  const ref = useRef<Record<string, HTMLInputElement>>({});\n  const register = (name: string) => ({\n    onChange() {},\n    ref(element: HTMLInputElement | null) {\n      ref.current[name] = element;\n    },\n  });\n  return { register };\n}\n")),(0,r.kt)("p",null,"ã“ã®ä»•çµ„ã¿ã¯ä½¿ãˆãã†ã ï¼ï¼")),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã® Hook ã®æ–¹é‡"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useRef")," ã®ä¸­ã§ ",(0,r.kt)("inlineCode",{parentName:"li"},"Map<number, HTMLInputElement>")," ã‚’ç®¡ç†ã™ã‚‹"),(0,r.kt)("li",{parentName:"ul"},"Hook ã®æˆ»ã‚Šå€¤ã¯ ",(0,r.kt)("inlineCode",{parentName:"li"},"register")," é–¢æ•°ã§ã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®é †ç•ªã‚’å¼•æ•°ã«æŒ‡å®šã™ã‚‹ã¨ ",(0,r.kt)("inlineCode",{parentName:"li"},"{ onKeyDown(), ref }")," ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™"),(0,r.kt)("li",{parentName:"ul"},"ä½¿ã†å´ã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§å±•é–‹ã™ã‚‹ã ã‘"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"çµæœ"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"samples/sample10"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'function useEnterKeyFocusControl() {\n  const ref = useRef(new Map<number, HTMLInputElement>());\n  return (index: number) => ({\n    onKeyDown({ key }: { key: string }) {\n      if (key !== "Enter") return;\n      const sortedIndices = [...ref.current.keys()].sort();\n      const nextIndex = sortedIndices[sortedIndices.indexOf(index) + 1];\n      if (typeof nextIndex === "number") ref.current.get(nextIndex)?.focus();\n    },\n    ref(element: HTMLInputElement | null) {\n      if (element) ref.current.set(index, element);\n      else ref.current.delete(index);\n    },\n  });\n}\n'))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"ã“ã‚“ãªã«ç°¡å˜ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function Sample10() {\n  const register = useEnterKeyFocusControl();\n  return (\n    <>\n      {[...Array(10).keys()].map((i) => (\n        <input key={i} {...register(i)} />\n      ))}\n    </>\n  );\n}\n"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"ã¾ã¨ã‚"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Hooks æ™‚ä»£ã® Ref ã®ç”¨é€”",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"DOM ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹"),(0,r.kt)("li",{parentName:"ul"},"ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå€¤ã‚’ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‹ã‚‰ç‹¬ç«‹ã—ã¦ç®¡ç†ã™ã‚‹"))),(0,r.kt)("li",{parentName:"ul"},"useRef ã§å¾—ã‚‰ã‚Œã‚‹ã®ã¯ Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã ãŒã€Callback Ref ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã¨ã‚ˆã‚ŠæŸ”è»Ÿã«åˆ¶å¾¡ã§ãã‚‹"),(0,r.kt)("li",{parentName:"ul"},"ã€ŒCallback Ref ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã€ã‚’è¿”ã™ Custom Hook ã‚’ä½œã‚‹ã¨è¤‡æ•°è¦ç´ ã® Ref ã‚’é«˜ã„æŠ½è±¡åº¦ã§æ‰±ãˆã‚‹"))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("h2",null,"å†ã³å®£ä¼"),(0,r.kt)("div",{className:"grid"},(0,r.kt)("div",{className:"column"},(0,r.kt)("p",null,"å¼Šç¤¾ ",(0,r.kt)("a",{parentName:"p",href:"https://kikitori.jp/"},"kikitori"),"ã¯ã€å›½å†…è¾²æ¥­æµé€šã® ",(0,r.kt)("strong",{parentName:"p"},"8 å‰²")," ã‚’å ã‚ã‚‹ ",(0,r.kt)("strong",{parentName:"p"},"å¸‚å ´æµé€š")," ã® DX ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚"),(0,r.kt)("p",null,"ç§ãŸã¡ã¨æ—¥æœ¬ã®è¾²æ¥­ã‚’æœªæ¥ã‚’ã¤ãã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’é–‹ç™ºã—ã¾ã›ã‚“ã‹ï¼Ÿ"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(4658),alt:"è¾²æ¥­æµé€šå›³"}))),(0,r.kt)("div",{className:"column"},(0,r.kt)("div",{className:"left"},(0,r.kt)("h4",null,"æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯"),(0,r.kt)("h5",null,"ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"TypeScript"),(0,r.kt)("li",{parentName:"ul"},"React"),(0,r.kt)("li",{parentName:"ul"},"Apollo"),(0,r.kt)("li",{parentName:"ul"},"Material-UI")),(0,r.kt)("h5",null,"ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"NestJS"),(0,r.kt)("li",{parentName:"ul"},"Apollo")),(0,r.kt)("h5",null,"ã‚¤ãƒ³ãƒ•ãƒ©"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ECS"),(0,r.kt)("li",{parentName:"ul"},"Aurora PostgreSQL"),(0,r.kt)("li",{parentName:"ul"},"Firebase Hosting"),(0,r.kt)("li",{parentName:"ul"},"AWS CDK (IaC)")))))),e=>(0,r.kt)(l.Fragment,null,(0,r.kt)("p",null,"ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ ğŸ™‡â€â™‚ï¸"))],p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}],k={};function i({components:e,...n}){return(0,r.kt)("wrapper",a({},k,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",null,"React ã® Ref ã¨ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã«ãŠã‘ã‚‹ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹"),(0,r.kt)("p",null,"æ ªå¼ä¼šç¤¾ kikitori CTO"),(0,r.kt)("p",null,"æ°¸è°· é¾å½¦"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/chelproc/20210715-coral-react-lt"},"ãƒªãƒã‚¸ãƒˆãƒª")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"samples"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"è‡ªå·±ç´¹ä»‹"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(9502),alt:"è‡ªå·±ç´¹ä»‹"})),(0,r.kt)("p",null,"æ±äº¬å¤§å­¦å·¥å­¦éƒ¨ã‚·ã‚¹ãƒ†ãƒ å‰µç”Ÿå­¦ç§‘ç’°å¢ƒãƒ»ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚·ã‚¹ãƒ†ãƒ å°‚æ”»ã€‚"),(0,r.kt)("p",null,"10 æ­³ã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã€‚14 æ­³ã§å­¦å†…å‘ã‘å­¦ç¿’ Q&A ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ç™ºã€‚2018 å¹´ã‚ˆã‚Šãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã¨ã—ã¦æ´»å‹•ã‚’é–‹å§‹ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‹ã‚‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¾ã§å¤šæ§˜ãªè¨€èªã‚’æ‰±ã†ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚"),(0,r.kt)("p",null,"2019 å¹´ã«æ ªå¼ä¼šç¤¾ kikitori ã«å‚ç”»ã€‚"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Ref ã¨ã¯"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Ref ã¯ render ãƒ¡ã‚½ãƒƒãƒ‰ã§ä½œæˆã•ã‚ŒãŸ DOM ãƒãƒ¼ãƒ‰ã‚‚ã—ãã¯ React ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚"),(0,r.kt)("p",{parentName:"blockquote"},"-- ",(0,r.kt)("a",{parentName:"p",href:"https://ja.reactjs.org/docs/refs-and-the-dom.html"},"https://ja.reactjs.org/docs/refs-and-the-dom.html"))),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"åŸºæœ¬çš„ãªä½¿ã„æ–¹"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useRef")," ã®æˆ»ã‚Šå€¤ã‚’ ",(0,r.kt)("inlineCode",{parentName:"p"},"ref")," å±æ€§ã«æ¸¡ã™ã¨ ",(0,r.kt)("inlineCode",{parentName:"p"},"current")," ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã« DOM ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå…¥ã‚‹ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample01"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function Sample1() {\n  const ref = useRef<HTMLInputElement>(null);\n\n  return (\n    <>\n      <input ref={ref} />\n      <button\n        onClick={() => {\n          ref.current?.focus();\n        }}\n      >\n        focus\n      </button>\n    </>\n  );\n}\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Ref ã®æ­´å²"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("del",{parentName:"li"},"String Refs")," (ãŸã¶ã‚“åˆæœŸã‹ã‚‰ã‚ã‚‹)"),(0,r.kt)("li",{parentName:"ul"},"Callback Ref (v0.13.0 / 2015 å¹´)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"String Refs ã‚ˆã‚ŠæŸ”è»Ÿã« Ref ãŒæ‰±ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚"))),(0,r.kt)("li",{parentName:"ul"},"Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (v16.3.0 / 2018 å¹´)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Callback Ref ã‚ˆã‚Šã‚‚é–‹ç™ºè€…ã«ã¨ã£ã¦ä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç›®æŒ‡ã—ã¦é–‹ç™ºã•ã‚ŒãŸã€‚")))),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Class Component æ™‚ä»£ã® Ref (1)"),(0,r.kt)("p",null,"Class Component æ™‚ä»£ã® Ref: ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample02"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"class Child extends Component {\n  render() {\n    return <div>Hello World</div>;\n  }\n}\n\nexport default class Sample02 extends Component {\n  divRef = createRef<HTMLDivElement>();\n  divElement: HTMLDivElement | null = null;\n  childRef = createRef<Child>();\n\n  render() {\n    return (\n      <>\n        {/* Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã†å ´åˆ */}\n        <div ref={this.divRef} />\n        {/* Callback Ref ã‚’ä½¿ã†å ´åˆ */}\n        <div\n          ref={(element) => {\n            this.divElement = element;\n          }}\n        />\n        <Child ref={this.childRef} />\n      </>\n    );\n  }\n}\n")),(0,r.kt)("p",null,"å¯¾è±¡ãŒ DOM è¦ç´ ã§ã‚ã‚Œã° DOM ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã€ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚Œã°ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå–å¾—ã§ãã‚‹"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Class Component æ™‚ä»£ã® Ref (2)"),(0,r.kt)("p",null,"å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã›ãŸã‚Šã™ã‚‹ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample03"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"class Child extends Component<{}, { count: number }> {\n  state = { count: 1 };\n\n  increment() {\n    this.setState((state) => ({ count: state.count + 1 }));\n  }\n\n  render() {\n    return <div>{this.state.count}</div>;\n  }\n}\n\nexport default class Sample03 extends Component {\n  ref = createRef<Child>();\n\n  render() {\n    return (\n      <>\n        <Child ref={this.ref} />\n        <button\n          onClick={() => {\n            this.ref.current?.increment();\n          }}\n        >\n          increment\n        </button>\n      </>\n    );\n  }\n}\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Hooks ä»¥é™ã® Ref (1)"),(0,r.kt)("p",null,"ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€Ref ã‚’å–å¾—ã§ããªã„ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample04"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function Child() {\n  return <div>Child</div>;\n}\n\nexport default function Sample04() {\n  const ref = useRef<any>(null);\n\n  // @ts-expect-error Property 'ref' does not exist on type 'IntrinsicAttributes'.\n  return <Child ref={ref} />;\n}\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Hooks ä»¥é™ã® Ref (2)"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef")," ã‚’ä½¿ã†ã¨ function component ã§ã‚‚ ref ã‚’å…¬é–‹ã§ãã‚‹ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample05"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"const Child = forwardRef<HTMLInputElement>(function Child(_, ref) {\n  return <input ref={ref} />;\n});\n\nexport default function Sample05() {\n  const ref = useRef<HTMLInputElement>(null);\n\n  return (\n    <>\n      <Child ref={ref} />\n      <button\n        onClick={() => {\n          ref.current?.focus();\n        }}\n      >\n        focus\n      </button>\n    </>\n  );\n}\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Hooks ä»¥é™ã® Ref (3)"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"ref")," ã¨ã„ã†å±æ€§åã«ã“ã ã‚ã‚‰ãªã‘ã‚Œã°åˆ¥ã« ",(0,r.kt)("inlineCode",{parentName:"p"},"forwardRef")," ã‚’ä½¿ã†å¿…è¦ã¯ãªã„ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample06"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function Child(props: { innerRef: Ref<HTMLInputElement> }) {\n  return <input ref={props.innerRef} />;\n}\n\nexport default function Sample06() {\n  const ref = useRef<HTMLInputElement>(null);\n\n  return (\n    <>\n      <Child innerRef={ref} />\n      <button\n        onClick={() => {\n          ref.current?.click();\n        }}\n      />\n    </>\n  );\n}\n")),(0,r.kt)("p",null,"HoC ã‚’ä½œã‚‹æ™‚ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½œæˆè€…ãŒ Class Component â†’ Functional Component ã«ç§»è¡Œã™ã‚‹éš›ã«ä¾¿åˆ©ã€‚"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Hooks ä»¥é™ã® Ref (4)"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle"),"ã‚’ç”¨ã„ã‚‹ã“ã¨ã§è‡ªç”±ãªå€¤ã‚’ ref ã«è¨­å®šã§ãã‚‹ã€‚ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€å˜ç´”ãªé–¢æ•°ã‚’ Ref ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample07"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"type ChildRef = () => void;\n\nconst Child = forwardRef<ChildRef>(function Child(_, ref) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useImperativeHandle(ref, () => () => {\n    inputRef.current?.focus();\n  });\n\n  return <input ref={inputRef} />;\n});\n\nexport default function Sample07() {\n  const ref = useRef<ChildRef>(null);\n\n  return (\n    <>\n      <Child ref={ref} />\n      <button\n        onClick={() => {\n          ref.current?.();\n        }}\n      >\n        focus\n      </button>\n    </>\n  );\n}\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"useEffect ã‚’ç”¨ã„ãŸ useImperativeHandle ã®å†å®Ÿè£…"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"samples/sample08"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'useEffect(() => {\n  const refValue = () => {\n    inputRef.current?.focus();\n  };\n\n  // Callback Refã®å ´åˆ\n  if (typeof ref === "function") {\n    ref(refValue);\n    return () => {\n      ref(null);\n    };\n  }\n\n  // Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ\n  if (ref) {\n    ref.current = refValue;\n    return () => {\n      ref.current = null;\n    };\n  }\n});\n')),(0,r.kt)("p",null,"ï¼ˆå°‘ãªãã¨ã‚‚ï¼‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒã‚¦ãƒ³ãƒˆæ™‚ã¨ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«è¦ªã‹ã‚‰æ¸¡ã•ã‚ŒãŸ Ref ã®å€¤ã‚’è¨­å®šã™ã‚Œã°ã‚ˆã„ã€‚"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"useImperativeHandle"),"ã‚’ä½¿ã†ã“ã¨ã§ã€Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ Callback Ref ã®å·®ç•°ã‚’å¸åã§ãã‚‹ã€‚"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Hooks å¾Œã® Ref ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"DOM ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ â† ä»Šã¾ã§æ‰±ã£ã¦ããŸ"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Class Component ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã®ä»£ã‚ã‚Š"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«"),(0,r.kt)("li",{parentName:"ul"},"å¤‰æ›´ã—ã¦ã‚‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œãªã„")))),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Ref ã® DOM ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (1)"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/streamich/react-use"},"react-use"),"ã®",(0,r.kt)("a",{parentName:"p",href:"https://github.com/streamich/react-use/blob/master/src/useMountedState.ts"},"useMountedState")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function useMountedState(): () => boolean {\n  const mountedRef = useRef<boolean>(false);\n  const get = useCallback(() => mountedRef.current, []);\n\n  useEffect(() => {\n    mountedRef.current = true;\n\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  return get;\n}\n")),(0,r.kt)("p",null,"ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç ´æ£„ã•ã‚ŒãŸå¾Œã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã«ãƒã‚¦ãƒ³ãƒˆçŠ¶æ…‹ã‚’æ ¼ç´ã—ã¦ã„ã‚‹"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"Ref ã® DOM ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (2)"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/react-redux"},"react-redux"),"ã®",(0,r.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/react-redux/blob/master/src/hooks/useSelector.js"},"useSelector")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function useSelectorWithStoreAndSubscription(selector, equalityFn, store) {\n  const latestSelector = useRef();\n  const latestStoreState = useRef();\n  const latestSelectedState = useRef();\n\n  let selectedState;\n  if (\n    selector !== latestSelector.current ||\n    storeState !== latestStoreState.current\n  ) {\n    const newSelectedState = selector(storeState);\n    if (!equalityFn(newSelectedState, latestSelectedState.current))\n      selectedState = newSelectedState;\n    else selectedState = latestSelectedState.current;\n  } else {\n    selectedState = latestSelectedState.current;\n  }\n  return selectedState;\n}\n")),(0,r.kt)("p",null,"ç„¡ç”¨ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ç™ºç”Ÿã•ã›ãªã„ã‚ˆã†ã«ã€",(0,r.kt)("inlineCode",{parentName:"p"},"selector")," ã®çµæœã‚’ Ref ã«ä¿å­˜ã—ã¦ãŠãã€‚"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"çªç„¶ã§ã™ãŒå¼Šç¤¾ã®ç´¹ä»‹ã§ã™"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(5927),alt:"nimaru"})),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(3710),alt:"kikitori"})),(0,r.kt)("p",null,"å¼Šç¤¾ ",(0,r.kt)("a",{parentName:"p",href:"https://kikitori.jp/"},"kikitori")," ã¯ã€è¾²ç”£ç‰©ã®æµé€šç¾å ´å‘ã‘ SaaSã€Œ",(0,r.kt)("a",{parentName:"p",href:"https://nimaru.jp/"},"nimaru"),"ã€ã‚’é€šã—ã¦ã€è¾²æ¥­æµé€šå…¨ä½“ã® DX ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚"),(0,r.kt)("p",null,"å…¨å›½ã®å¸å£²å¸‚å ´ã‚„ JA ã«ã¦ã”åˆ©ç”¨ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã«ã¦"),(0,r.kt)("p",null,"å¼Šç¤¾ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã® 1 ã¤ã§ã‚ã‚‹ nimaru JA ã¯æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ çš„ãªå´é¢ãŒå¼·ã„"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(5622),alt:"nimaru JAã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ"})),(0,r.kt)("p",null,"ã€ŒEnter ã‚­ãƒ¼ã§ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã—ãŸã„ã€ã¨ã„ã†è¦æœ›ãŒæ¥ãŸã‚‰ï¼Ÿï¼Ÿ"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"èª²é¡Œ"),(0,r.kt)("p",null,"Ref ã§è¤‡æ•°ã® DOM ã‚’ã©ã†æ‰±ã†ã‹ ğŸ¤”"),(0,r.kt)("hr",null),(0,r.kt)("p",null,"ãªã‚“ã‹ Ref ã‚’ã‚´ãƒ‹ãƒ§ã‚´ãƒ‹ãƒ§ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã£ãŸã‚ˆã†ãª"),(0,r.kt)("p",null,(0,r.kt)("img",{src:"https://raw.githubusercontent.com/react-hook-form/react-hook-form/master/docs/logo.png",alt:"React Hook Form"})),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"React Hook Form"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"register")," ã®æˆ»ã‚Šå€¤ã«ã¯ ",(0,r.kt)("inlineCode",{parentName:"p"},"Ref")," ãŒå«ã¾ã‚Œã‚‹ã€‚"),(0,r.kt)("p",null,"æ•¢ãˆã¦ ",(0,r.kt)("inlineCode",{parentName:"p"},"value")," å±æ€§ã‚’ä½¿ã‚ãš ",(0,r.kt)("inlineCode",{parentName:"p"},"input")," ã‚’éåˆ¶å¾¡ã®ã¾ã¾ã«ã—ã¦ãŠãã“ã¨ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ”¹å–„ã—ãŸã€‚",(0,r.kt)("a",{parentName:"p",href:"samples/sample09"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'type FormValue = {\n  name: string;\n};\n\nexport default function Sample09() {\n  const { register, handleSubmit } = useForm<FormValue>();\n\n  return (\n    <form\n      onSubmit={handleSubmit((e) => {\n        alert(e.name);\n      })}\n    >\n      <input {...register("name")} />\n      <input type="submit" />\n    </form>\n  );\n}\n')),(0,r.kt)("p",null,"ã¡ãªã¿ã« v6 ã§ã¯ ",(0,r.kt)("inlineCode",{parentName:"p"},"ref={register()}")," ã¨ã‚„ã£ã¦ã„ãŸã®ã§ v7 ã® API ã§ã¯èƒŒå¾³æ„ŸãŒè–„ããªã£ãŸï¼ˆï¼Ÿï¼‰"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"React Hook Form ã®å‹•ä½œåŸç†"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"register")," ã¯ ",(0,r.kt)("inlineCode",{parentName:"li"},"{ onChange(), ref }")," ã®å½¢ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ä½¿ã†å´ã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§å±•é–‹ã™ã‚‹ã ã‘ã§ä½¿ãˆã‚‹"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ref")," ã¯ Callback Ref"),(0,r.kt)("li",{parentName:"ul"},"Callback Ref å†…ã§",(0,r.kt)("strong",{parentName:"li"},"é€£æƒ³é…åˆ—"),"ã® Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã« ref ã‚’ä¿å­˜ã™ã‚‹")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"function useForm() {\n  const ref = useRef<Record<string, HTMLInputElement>>({});\n  const register = (name: string) => ({\n    onChange() {},\n    ref(element: HTMLInputElement | null) {\n      ref.current[name] = element;\n    },\n  });\n  return { register };\n}\n")),(0,r.kt)("p",null,"ã“ã®ä»•çµ„ã¿ã¯ä½¿ãˆãã†ã ï¼ï¼"),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã® Hook ã®æ–¹é‡"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"useRef")," ã®ä¸­ã§ ",(0,r.kt)("inlineCode",{parentName:"li"},"Map<number, HTMLInputElement>")," ã‚’ç®¡ç†ã™ã‚‹"),(0,r.kt)("li",{parentName:"ul"},"Hook ã®æˆ»ã‚Šå€¤ã¯ ",(0,r.kt)("inlineCode",{parentName:"li"},"register")," é–¢æ•°ã§ã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®é †ç•ªã‚’å¼•æ•°ã«æŒ‡å®šã™ã‚‹ã¨ ",(0,r.kt)("inlineCode",{parentName:"li"},"{ onKeyDown(), ref }")," ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™"),(0,r.kt)("li",{parentName:"ul"},"ä½¿ã†å´ã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§å±•é–‹ã™ã‚‹ã ã‘")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"çµæœ"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"samples/sample10"},"ã‚µãƒ³ãƒ—ãƒ«")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'function useEnterKeyFocusControl() {\n  const ref = useRef(new Map<number, HTMLInputElement>());\n  return (index: number) => ({\n    onKeyDown({ key }: { key: string }) {\n      if (key !== "Enter") return;\n      const sortedIndices = [...ref.current.keys()].sort();\n      const nextIndex = sortedIndices[sortedIndices.indexOf(index) + 1];\n      if (typeof nextIndex === "number") ref.current.get(nextIndex)?.focus();\n    },\n    ref(element: HTMLInputElement | null) {\n      if (element) ref.current.set(index, element);\n      else ref.current.delete(index);\n    },\n  });\n}\n')),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"ã“ã‚“ãªã«ç°¡å˜ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export default function Sample10() {\n  const register = useEnterKeyFocusControl();\n  return (\n    <>\n      {[...Array(10).keys()].map((i) => (\n        <input key={i} {...register(i)} />\n      ))}\n    </>\n  );\n}\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"ã¾ã¨ã‚"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Hooks æ™‚ä»£ã® Ref ã®ç”¨é€”",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"DOM ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹"),(0,r.kt)("li",{parentName:"ul"},"ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå€¤ã‚’ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‹ã‚‰ç‹¬ç«‹ã—ã¦ç®¡ç†ã™ã‚‹"))),(0,r.kt)("li",{parentName:"ul"},"useRef ã§å¾—ã‚‰ã‚Œã‚‹ã®ã¯ Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã ãŒã€Callback Ref ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã¨ã‚ˆã‚ŠæŸ”è»Ÿã«åˆ¶å¾¡ã§ãã‚‹"),(0,r.kt)("li",{parentName:"ul"},"ã€ŒCallback Ref ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã€ã‚’è¿”ã™ Custom Hook ã‚’ä½œã‚‹ã¨è¤‡æ•°è¦ç´ ã® Ref ã‚’é«˜ã„æŠ½è±¡åº¦ã§æ‰±ãˆã‚‹")),(0,r.kt)("hr",null),(0,r.kt)("h2",null,"å†ã³å®£ä¼"),(0,r.kt)("p",null,"å¼Šç¤¾ ",(0,r.kt)("a",{parentName:"p",href:"https://kikitori.jp/"},"kikitori"),"ã¯ã€å›½å†…è¾²æ¥­æµé€šã® ",(0,r.kt)("strong",{parentName:"p"},"8 å‰²")," ã‚’å ã‚ã‚‹ ",(0,r.kt)("strong",{parentName:"p"},"å¸‚å ´æµé€š")," ã® DX ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚"),(0,r.kt)("p",null,"ç§ãŸã¡ã¨æ—¥æœ¬ã®è¾²æ¥­ã‚’æœªæ¥ã‚’ã¤ãã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’é–‹ç™ºã—ã¾ã›ã‚“ã‹ï¼Ÿ"),(0,r.kt)("p",null,(0,r.kt)("img",{src:t(4658),alt:"è¾²æ¥­æµé€šå›³"})),(0,r.kt)("div",{className:"left"},(0,r.kt)("h4",null,"æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯"),(0,r.kt)("h5",null,"ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"TypeScript"),(0,r.kt)("li",{parentName:"ul"},"React"),(0,r.kt)("li",{parentName:"ul"},"Apollo"),(0,r.kt)("li",{parentName:"ul"},"Material-UI")),(0,r.kt)("h5",null,"ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"NestJS"),(0,r.kt)("li",{parentName:"ul"},"Apollo")),(0,r.kt)("h5",null,"ã‚¤ãƒ³ãƒ•ãƒ©"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ECS"),(0,r.kt)("li",{parentName:"ul"},"Aurora PostgreSQL"),(0,r.kt)("li",{parentName:"ul"},"Firebase Hosting"),(0,r.kt)("li",{parentName:"ul"},"AWS CDK (IaC)"))),(0,r.kt)("hr",null),(0,r.kt)("p",null,"ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ ğŸ™‡â€â™‚ï¸"))}i.isMDXComponent=!0},6873:(e,n,t)=>{"use strict";t.r(n)},4658:(e,n,t)=>{"use strict";e.exports=t.p+"9c2074b55a3f796f60dd.webp"},5622:(e,n,t)=>{"use strict";e.exports=t.p+"d1556cee662ef0d8e913.webp"},9502:(e,n,t)=>{"use strict";e.exports=t.p+"3a831571502b4616f10d.webp"},3710:(e,n,t)=>{"use strict";e.exports=t.p+"ea5447c45dd6b1d657ee.svg"},5927:(e,n,t)=>{"use strict";e.exports=t.p+"cbc0a06e8a9246186097.svg"},1189:(e,n,t)=>{var l={"./0-slide.md":2953};function r(e){var n=a(e);return t(n)}function a(e){if(!t.o(l,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return l[e]}r.keys=function(){return Object.keys(l)},r.resolve=a,e.exports=r,r.id=1189}},e=>{"use strict";e.O(0,[179],(()=>[901,921,626].map(e.E)),5);var n=n=>e(e.s=n);e.O(0,[736],(()=>(n(7751),n(6905),n(9969))));e.O()}]);