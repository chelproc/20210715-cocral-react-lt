<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>slide</title><meta property="og:title" content="slide"><meta property="og:type" content="article"><meta property="og:url" content="https://chelproc.github.io/20210715-cocral-react-lt/"><meta property="og:image" content="https://chelproc.github.io/20210715-cocral-react-lt/thumbnail.png"><script defer="defer" src="/20210715-cocral-react-lt/runtime.1d8ddb650acaf51ff40f.bundle.js"></script><script defer="defer" src="/20210715-cocral-react-lt/vendor.07da14b8c13f40f998e2.bundle.js"></script><script defer="defer" src="/20210715-cocral-react-lt/main.b1bb7d09d9717396e40c.bundle.js"></script><link href="/20210715-cocral-react-lt/vendor.07da14b8c13f40f998e2.css" rel="stylesheet"><link href="/20210715-cocral-react-lt/main.b1bb7d09d9717396e40c.css" rel="stylesheet"><link rel="prefetch" as="script" href="/20210715-cocral-react-lt/901.5caeac27a7df0b508f32.bundle.js"><link rel="prefetch" as="script" href="/20210715-cocral-react-lt/921.1a8607be2c8caa415780.bundle.js"></head><body><div id="root"><div class="swiper-container swiper-container-initialized swiper-container-horizontal swiper-container-pointer-events" id="main-slides"><div class="swiper-pagination"></div><div class="swiper-wrapper" id="swiper-wrapper-8bfdf3edea5f166f" aria-live="polite" style="transform: translate3d(0px, 0px, 0px);"><div class="swiper-slide swiper-slide-active" data-hash="slide-1" role="group" aria-label="1 / 27" style="width: 1200px;"><div class="slide-internal-box"><h1>React ã® Ref ã¨ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã«ãŠã‘ã‚‹ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h1><p>æ ªå¼ä¼šç¤¾ kikitori CTO</p><p>æ°¸è°· é¾å½¦</p><p><a href="https://github.com/chelproc/20210715-coral-react-lt">ãƒªãƒã‚¸ãƒˆãƒª</a></p></div></div><div class="swiper-slide swiper-slide-next" data-hash="slide-2" role="group" aria-label="2 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>è‡ªå·±ç´¹ä»‹</h2><div class="grid"><div class="column"><p><img src="/20210715-cocral-react-lt/3a831571502b4616f10d.webp" alt="è‡ªå·±ç´¹ä»‹"></p></div><div class="column"><p>æ±äº¬å¤§å­¦å·¥å­¦éƒ¨ã‚·ã‚¹ãƒ†ãƒ å‰µç”Ÿå­¦ç§‘ç’°å¢ƒãƒ»ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚·ã‚¹ãƒ†ãƒ å°‚æ”»ã€‚</p><p>10 æ­³ã‹ã‚‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆã€‚14 æ­³ã§å­¦å†…å‘ã‘å­¦ç¿’ Q&amp;A ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹ç™ºã€‚2018 å¹´ã‚ˆã‚Šãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã¨ã—ã¦æ´»å‹•ã‚’é–‹å§‹ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‹ã‚‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¾ã§å¤šæ§˜ãªè¨€èªã‚’æ‰±ã†ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚</p><p>2019 å¹´ã«æ ªå¼ä¼šç¤¾ kikitori ã«å‚ç”»ã€‚</p></div></div></div></div><div class="swiper-slide" data-hash="slide-3" role="group" aria-label="3 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Ref ã¨ã¯</h2><blockquote><p>Ref ã¯ render ãƒ¡ã‚½ãƒƒãƒ‰ã§ä½œæˆã•ã‚ŒãŸ DOM ãƒãƒ¼ãƒ‰ã‚‚ã—ãã¯ React ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚</p><p>-- <a href="https://ja.reactjs.org/docs/refs-and-the-dom.html">https://ja.reactjs.org/docs/refs-and-the-dom.html</a></p></blockquote></div></div><div class="swiper-slide" data-hash="slide-4" role="group" aria-label="4 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>åŸºæœ¬çš„ãªä½¿ã„æ–¹</h2><p><code>useRef</code> ã®æˆ»ã‚Šå€¤ã‚’ <code>ref</code> å±æ€§ã«æ¸¡ã™ã¨ <code>current</code> ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã« DOM ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå…¥ã‚‹ã€‚<a href="samples/sample01">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Sample1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          ref<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        focus
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="swiper-slide" data-hash="slide-5" role="group" aria-label="5 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Ref ã®æ­´å²</h2><ul><li><del>String Refs</del> (ãŸã¶ã‚“åˆæœŸã‹ã‚‰ã‚ã‚‹)</li><li>Callback Ref (v0.13.0 / 2015 å¹´)<ul><li>String Refs ã‚ˆã‚ŠæŸ”è»Ÿã« Ref ãŒæ‰±ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚</li></ul></li><li>Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ (v16.3.0 / 2018 å¹´)<ul><li>Callback Ref ã‚ˆã‚Šã‚‚é–‹ç™ºè€…ã«ã¨ã£ã¦ä½¿ã„ã‚„ã™ã„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç›®æŒ‡ã—ã¦é–‹ç™ºã•ã‚ŒãŸã€‚</li></ul></li></ul></div></div><div class="swiper-slide" data-hash="slide-6" role="group" aria-label="6 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Class Component æ™‚ä»£ã® Ref (1)</h2><p>Class Component æ™‚ä»£ã® Ref: ã‚¯ãƒ©ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€‚<a href="samples/sample02">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello World</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Sample02</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  divRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLDivElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  divElement<span class="token operator">:</span> HTMLDivElement <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  childRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã†å ´åˆ */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>divRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* Callback Ref ã‚’ä½¿ã†å ´åˆ */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>divElement <span class="token operator">=</span> element<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>childRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>å¯¾è±¡ãŒ DOM è¦ç´ ã§ã‚ã‚Œã° DOM ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã€ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚Œã°ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå–å¾—ã§ãã‚‹</p></div></div><div class="swiper-slide" data-hash="slide-7" role="group" aria-label="7 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Class Component æ™‚ä»£ã® Ref (2)</h2><p>å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã›ãŸã‚Šã™ã‚‹ã€‚<a href="samples/sample03">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component<span class="token operator">&lt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Sample03</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">createRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>Child<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
          <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ref<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          increment
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="swiper-slide" data-hash="slide-8" role="group" aria-label="8 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Hooks ä»¥é™ã® Ref (1)</h2><p>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€Ref ã‚’å–å¾—ã§ããªã„ã€‚<a href="samples/sample04">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Child</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Sample04</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// @ts-expect-error Property 'ref' does not exist on type 'IntrinsicAttributes'.</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="swiper-slide" data-hash="slide-9" role="group" aria-label="9 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Hooks ä»¥é™ã® Ref (2)</h2><p><code>forwardRef</code> ã‚’ä½¿ã†ã¨ function component ã§ã‚‚ ref ã‚’å…¬é–‹ã§ãã‚‹ã€‚<a href="samples/sample05">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token generic-function"><span class="token function">forwardRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Sample05</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          ref<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        focus
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="swiper-slide" data-hash="slide-10" role="group" aria-label="10 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Hooks ä»¥é™ã® Ref (3)</h2><p><code>ref</code> ã¨ã„ã†å±æ€§åã«ã“ã ã‚ã‚‰ãªã‘ã‚Œã°åˆ¥ã« <code>forwardRef</code> ã‚’ä½¿ã†å¿…è¦ã¯ãªã„ã€‚<a href="samples/sample06">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> <span class="token punctuation">{</span> innerRef<span class="token operator">:</span> Ref<span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>innerRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Sample06</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">innerRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          ref<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>HoC ã‚’ä½œã‚‹æ™‚ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½œæˆè€…ãŒ Class Component â†’ Functional Component ã«ç§»è¡Œã™ã‚‹éš›ã«ä¾¿åˆ©ã€‚</p></div></div><div class="swiper-slide" data-hash="slide-11" role="group" aria-label="11 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Hooks ä»¥é™ã® Ref (4)</h2><p><code>useImperativeHandle</code>ã‚’ç”¨ã„ã‚‹ã“ã¨ã§è‡ªç”±ãªå€¤ã‚’ ref ã«è¨­å®šã§ãã‚‹ã€‚ä»¥ä¸‹ã®ä¾‹ã§ã¯ã€å˜ç´”ãªé–¢æ•°ã‚’ Ref ã¨ã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚<a href="samples/sample07">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">type</span> <span class="token class-name">ChildRef</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token generic-function"><span class="token function">forwardRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>ChildRef<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTMLInputElement<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    inputRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Sample07</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>ChildRef<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          ref<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        focus
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="swiper-slide" data-hash="slide-12" role="group" aria-label="12 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>useEffect ã‚’ç”¨ã„ãŸ useImperativeHandle ã®å†å®Ÿè£…</h2><p><a href="samples/sample08">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">refValue</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    inputRef<span class="token punctuation">.</span>current<span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Callback Refã®å ´åˆ</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> ref <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">ref</span><span class="token punctuation">(</span>refValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆ</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ref<span class="token punctuation">.</span>current <span class="token operator">=</span> refValue<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      ref<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>ï¼ˆå°‘ãªãã¨ã‚‚ï¼‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒã‚¦ãƒ³ãƒˆæ™‚ã¨ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«è¦ªã‹ã‚‰æ¸¡ã•ã‚ŒãŸ Ref ã®å€¤ã‚’è¨­å®šã™ã‚Œã°ã‚ˆã„ã€‚</p><p><code>useImperativeHandle</code>ã‚’ä½¿ã†ã“ã¨ã§ã€Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ Callback Ref ã®å·®ç•°ã‚’å¸åã§ãã‚‹ã€‚</p></div></div><div class="swiper-slide" data-hash="slide-13" role="group" aria-label="13 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Hooks å¾Œã® Ref ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹</h2><ul><li>DOM ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ â† ä»Šã¾ã§æ‰±ã£ã¦ããŸ</li><li><strong>Class Component ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å¤‰æ•°ã®ä»£ã‚ã‚Š</strong><ul><li>ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«</li><li>å¤‰æ›´ã—ã¦ã‚‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œãªã„</li></ul></li></ul></div></div><div class="swiper-slide" data-hash="slide-14" role="group" aria-label="14 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Ref ã® DOM ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (1)</h2><p><a href="https://github.com/streamich/react-use">react-use</a>ã®<a href="https://github.com/streamich/react-use/blob/master/src/useMountedState.ts">useMountedState</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">useMountedState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mountedRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> get <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> mountedRef<span class="token punctuation">.</span>current<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    mountedRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      mountedRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> get<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç ´æ£„ã•ã‚ŒãŸå¾Œã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã«ãƒã‚¦ãƒ³ãƒˆçŠ¶æ…‹ã‚’æ ¼ç´ã—ã¦ã„ã‚‹</p></div></div><div class="swiper-slide" data-hash="slide-15" role="group" aria-label="15 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>Ref ã® DOM ä»¥å¤–ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ (2)</h2><p><a href="https://github.com/reduxjs/react-redux">react-redux</a>ã®<a href="https://github.com/reduxjs/react-redux/blob/master/src/hooks/useSelector.js">useSelector</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">function</span> <span class="token function">useSelectorWithStoreAndSubscription</span><span class="token punctuation">(</span><span class="token parameter">selector<span class="token punctuation">,</span> equalityFn<span class="token punctuation">,</span> store</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> latestSelector <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> latestStoreState <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> latestSelectedState <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> selectedState<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    selector <span class="token operator">!==</span> latestSelector<span class="token punctuation">.</span>current <span class="token operator">||</span>
    storeState <span class="token operator">!==</span> latestStoreState<span class="token punctuation">.</span>current
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newSelectedState <span class="token operator">=</span> <span class="token function">selector</span><span class="token punctuation">(</span>storeState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">equalityFn</span><span class="token punctuation">(</span>newSelectedState<span class="token punctuation">,</span> latestSelectedState<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span>
      selectedState <span class="token operator">=</span> newSelectedState<span class="token punctuation">;</span>
    <span class="token keyword">else</span> selectedState <span class="token operator">=</span> latestSelectedState<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    selectedState <span class="token operator">=</span> latestSelectedState<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> selectedState<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>ç„¡ç”¨ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ç™ºç”Ÿã•ã›ãªã„ã‚ˆã†ã«ã€<code>selector</code> ã®çµæœã‚’ Ref ã«ä¿å­˜ã—ã¦ãŠãã€‚</p></div></div><div class="swiper-slide" data-hash="slide-16" role="group" aria-label="16 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>çªç„¶ã§ã™ãŒå¼Šç¤¾ã®ç´¹ä»‹ã§ã™</h2><div class="grid"><div class="column"><p><img src="/20210715-cocral-react-lt/cbc0a06e8a9246186097.svg" alt="nimaru"></p><p><img src="/20210715-cocral-react-lt/ea5447c45dd6b1d657ee.svg" alt="kikitori"></p></div><div class="column"><p>å¼Šç¤¾ <a href="https://kikitori.jp/">kikitori</a> ã¯ã€è¾²ç”£ç‰©ã®æµé€šç¾å ´å‘ã‘ SaaSã€Œ<a href="https://nimaru.jp/">nimaru</a>ã€ã‚’é€šã—ã¦ã€è¾²æ¥­æµé€šå…¨ä½“ã® DX ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚</p><p>å…¨å›½ã®å¸å£²å¸‚å ´ã‚„ JA ã«ã¦ã”åˆ©ç”¨ã„ãŸã ã„ã¦ã„ã¾ã™ã€‚</p></div></div></div></div><div class="swiper-slide" data-hash="slide-17" role="group" aria-label="17 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã«ã¦</h2><p>å¼Šç¤¾ã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã® 1 ã¤ã§ã‚ã‚‹ nimaru JA ã¯æ¥­å‹™ã‚·ã‚¹ãƒ†ãƒ çš„ãªå´é¢ãŒå¼·ã„</p><p><img src="/20210715-cocral-react-lt/d1556cee662ef0d8e913.webp" alt="nimaru JAã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ"></p><p>ã€ŒEnter ã‚­ãƒ¼ã§ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã—ãŸã„ã€ã¨ã„ã†è¦æœ›ãŒæ¥ãŸã‚‰ï¼Ÿï¼Ÿ</p></div></div><div class="swiper-slide" data-hash="slide-18" role="group" aria-label="18 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>èª²é¡Œ</h2><p>Ref ã§è¤‡æ•°ã® DOM ã‚’ã©ã†æ‰±ã†ã‹ ğŸ¤”</p></div></div><div class="swiper-slide" data-hash="slide-19" role="group" aria-label="19 / 27" style="width: 1200px;"><div class="slide-internal-box"><p>ãªã‚“ã‹ Ref ã‚’ã‚´ãƒ‹ãƒ§ã‚´ãƒ‹ãƒ§ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã£ãŸã‚ˆã†ãª</p><p><img src="https://raw.githubusercontent.com/react-hook-form/react-hook-form/master/docs/logo.png" alt="React Hook Form"></p></div></div><div class="swiper-slide" data-hash="slide-20" role="group" aria-label="20 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>React Hook Form</h2><p><code>register</code> ã®æˆ»ã‚Šå€¤ã«ã¯ <code>Ref</code> ãŒå«ã¾ã‚Œã‚‹ã€‚</p><p>æ•¢ãˆã¦ <code>value</code> å±æ€§ã‚’ä½¿ã‚ãš <code>input</code> ã‚’éåˆ¶å¾¡ã®ã¾ã¾ã«ã—ã¦ãŠãã“ã¨ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ”¹å–„ã—ãŸã€‚<a href="samples/sample09">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">type</span> <span class="token class-name">FormValue</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Sample09</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> register<span class="token punctuation">,</span> handleSubmit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useForm</span><span class="token generic class-name"><span class="token operator">&lt;</span>FormValue<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span>
      <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>ã¡ãªã¿ã« v6 ã§ã¯ <code>ref={register()}</code> ã¨ã‚„ã£ã¦ã„ãŸã®ã§ v7 ã® API ã§ã¯èƒŒå¾³æ„ŸãŒè–„ããªã£ãŸï¼ˆï¼Ÿï¼‰</p></div></div><div class="swiper-slide" data-hash="slide-21" role="group" aria-label="21 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>React Hook Form ã®å‹•ä½œåŸç†</h2><ul><li><code>register</code> ã¯ <code>{ onChange(), ref }</code> ã®å½¢ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™<ul><li>ä½¿ã†å´ã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§å±•é–‹ã™ã‚‹ã ã‘ã§ä½¿ãˆã‚‹</li></ul></li><li><code>ref</code> ã¯ Callback Ref</li><li>Callback Ref å†…ã§<strong>é€£æƒ³é…åˆ—</strong>ã® Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã« ref ã‚’ä¿å­˜ã™ã‚‹</li></ul><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">function</span> <span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useRef</span><span class="token generic class-name"><span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> HTMLInputElement<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">register</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">ref</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token operator">:</span> HTMLInputElement <span class="token operator">|</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ref<span class="token punctuation">.</span>current<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> register <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>ã“ã®ä»•çµ„ã¿ã¯ä½¿ãˆãã†ã ï¼ï¼</p></div></div><div class="swiper-slide" data-hash="slide-22" role="group" aria-label="22 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†ã® Hook ã®æ–¹é‡</h2><ul><li><code>useRef</code> ã®ä¸­ã§ <code>Map&lt;number, HTMLInputElement&gt;</code> ã‚’ç®¡ç†ã™ã‚‹</li><li>Hook ã®æˆ»ã‚Šå€¤ã¯ <code>register</code> é–¢æ•°ã§ã€ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®é †ç•ªã‚’å¼•æ•°ã«æŒ‡å®šã™ã‚‹ã¨ <code>{ onKeyDown(), ref }</code> ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™</li><li>ä½¿ã†å´ã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§å±•é–‹ã™ã‚‹ã ã‘</li></ul></div></div><div class="swiper-slide" data-hash="slide-23" role="group" aria-label="23 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>çµæœ</h2><p><a href="samples/sample10">ã‚µãƒ³ãƒ—ãƒ«</a></p><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">function</span> <span class="token function">useEnterKeyFocusControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Map<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token punctuation">,</span> HTMLInputElement<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">onKeyDown</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> key <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> key<span class="token operator">:</span> string <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">!==</span> <span class="token string">"Enter"</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> sortedIndices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> nextIndex <span class="token operator">=</span> sortedIndices<span class="token punctuation">[</span>sortedIndices<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> nextIndex <span class="token operator">===</span> <span class="token string">"number"</span><span class="token punctuation">)</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nextIndex<span class="token punctuation">)</span><span class="token operator">?.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">ref</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token operator">:</span> HTMLInputElement <span class="token operator">|</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">)</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span> ref<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="swiper-slide" data-hash="slide-24" role="group" aria-label="24 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>ã“ã‚“ãªã«ç°¡å˜ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ</h2><pre class="  language-tsx" tabindex="0"><code class="  language-tsx"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Sample10</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> register <span class="token operator">=</span> <span class="token function">useEnterKeyFocusControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span><span class="token function">register</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="swiper-slide" data-hash="slide-25" role="group" aria-label="25 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>ã¾ã¨ã‚</h2><ul><li>Hooks æ™‚ä»£ã® Ref ã®ç”¨é€”<ul><li>DOM ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹</li><li>ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªå€¤ã‚’ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‹ã‚‰ç‹¬ç«‹ã—ã¦ç®¡ç†ã™ã‚‹</li></ul></li><li>useRef ã§å¾—ã‚‰ã‚Œã‚‹ã®ã¯ Ref ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã ãŒã€Callback Ref ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã¨ã‚ˆã‚ŠæŸ”è»Ÿã«åˆ¶å¾¡ã§ãã‚‹</li><li>ã€ŒCallback Ref ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã€ã‚’è¿”ã™ Custom Hook ã‚’ä½œã‚‹ã¨è¤‡æ•°è¦ç´ ã® Ref ã‚’é«˜ã„æŠ½è±¡åº¦ã§æ‰±ãˆã‚‹</li></ul></div></div><div class="swiper-slide" data-hash="slide-26" role="group" aria-label="26 / 27" style="width: 1200px;"><div class="slide-internal-box"><h2>å†ã³å®£ä¼</h2><div class="grid"><div class="column"><p>å¼Šç¤¾ <a href="https://kikitori.jp/">kikitori</a>ã¯ã€å›½å†…è¾²æ¥­æµé€šã® <strong>8 å‰²</strong> ã‚’å ã‚ã‚‹ <strong>å¸‚å ´æµé€š</strong> ã® DX ã«å–ã‚Šçµ„ã‚“ã§ã„ã¾ã™ã€‚</p><p>ç§ãŸã¡ã¨æ—¥æœ¬ã®è¾²æ¥­ã‚’æœªæ¥ã‚’ã¤ãã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚’é–‹ç™ºã—ã¾ã›ã‚“ã‹ï¼Ÿ</p><p><img src="/20210715-cocral-react-lt/9c2074b55a3f796f60dd.webp" alt="è¾²æ¥­æµé€šå›³"></p></div><div class="column"><div class="left"><h4>æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h4><h5>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰</h5><ul><li>TypeScript</li><li>React</li><li>Apollo</li><li>Material-UI</li></ul><h5>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰</h5><ul><li>NestJS</li><li>Apollo</li></ul><h5>ã‚¤ãƒ³ãƒ•ãƒ©</h5><ul><li>ECS</li><li>Aurora PostgreSQL</li><li>Firebase Hosting</li><li>AWS CDK (IaC)</li></ul></div></div></div></div></div><div class="swiper-slide" data-hash="slide-27" role="group" aria-label="27 / 27" style="width: 1200px;"><div class="slide-internal-box"><p>ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ ğŸ™‡â€â™‚ï¸</p></div></div></div><span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span></div></div></body></html>